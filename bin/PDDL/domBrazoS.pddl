(define (domain MoBAr-Arm)
    (:requirements :strips :typing )
    (:types pos block - object)
    (:predicates
        (arm-empty)
        (arm-position ?p - pos)
        (table-clear ?p - pos)
        (hold ?b - block)
        (clear ?b - block)
        (position ?b - block ?p - pos)
        (last_is_move)
        ; Bloque 2 encima de 1
        (on ?b1 ?b2 - block)
    )

    (:action move-arm
     :parameters (?p1 ?p2 - pos)
     :precondition (and (arm-position ?p1)
                  (not (last_is_move)) )
     :effect (and (not (arm-position ?p1))
                  (arm-position ?p2) 
                  (last_is_move) )
    )

    (:action grip-block-on-table
     :parameters (?b - block ?p - pos)
     :precondition (and (arm-position ?p)
                     (arm-empty)
                     (position ?b ?p)
                     (clear ?b) )
     :effect (and (not (arm-empty))
                  (hold ?b)
                  (table-clear ?p)
                  (not (clear ?b))
                  (not (position ?b ?p))
                  (not (last_is_move)) )
    )

    (:action grip-block-on-block
     :parameters (?b1 - block ?p - pos ?b2 - block)
     :precondition (and (arm-position ?p)
                     (arm-empty)
                     (position ?b1 ?p)
                     (position ?b2 ?p)
                     (on ?b1 ?b2)
                     (clear ?b2) )
     :effect (and (not (arm-empty))
                  (hold ?b2)
                  (not (on ?b1 ?b2))
                  (clear ?b1)
                  (not (clear ?b2))
                  (not (position ?b2 ?p))
                  (not (last_is_move)) )
    )

    (:action put-on-table
	 :parameters (?b - block ?p - pos)
	 :precondition (and (arm-position ?p)
                     (hold ?b)
                     (table-clear ?p) )
	 :effect (and (not (table-clear ?p))
                  (clear ?b)
                  (position ?b ?p)
                  (not (hold ?b))
                  (arm-empty)
                  (not (last_is_move)) )
	)

    (:action put-on-block
	 :parameters (?b1 ?b2 - block ?p - pos)
	 :precondition (and (arm-position ?p)
                     (position ?b1 ?p)
                     (clear ?b1)
                     (hold ?b2) )
	 :effect (and (not (clear ?b1))
                  (clear ?b2)
                  (on ?b1 ?b2)
                  (position ?b2 ?p)
                  (not (hold ?b2))
                  (arm-empty)
                  (not (last_is_move)) )
	)

)
